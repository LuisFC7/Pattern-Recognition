clc
clear all
close all
warning off all
%Programa para identificar objetos geometricos de una imagen

figure(1)
a=imread('\GeometricShapes.jpg');%aqui poner ubicacion de imagen
imshow(a)
figure(2)
c=im2bw(a);%conversion a binario
imshow(c)

%extraccion de caractteristicas para el reconocimiento de los patrones
%mediante propiedades geometricas
objetos=regionprops(c,'Perimeter','Area','Centroid','BoundingBox');

squares=0;
circles=0;
triangles=0;
colores={'r','g','b'};
for k=1:length(objetos)
    caja=objetos(k).BoundingBox;

    if(objetos(k).Area>10000)
        rectangle('Position',[caja(1),caja(2),caja(3),caja(4)],'EdgeColor','b','LineWidth',2);%esta linea encierra cada objeto en una caja
    else
         rectangle('Position',[caja(1),caja(2),caja(3),caja(4)],'EdgeColor','r','LineWidth',2);
    end

    if(objetos(k).Perimeter^2/objetos(k).Area>18)
        text(objetos(k).Centroid(1),objetos(k).Centroid(2),'TRIANGULO','Color','r');
        triangles=triangles+1;
    elseif(objetos(k).Perimeter^2/objetos(k).Area<14.3)
        text(objetos(k).Centroid(1),objetos(k).Centroid(2),'CIRCULO','Color','g');
        circles=circles+1;
    else
        text(objetos(k).Centroid(1),objetos(k).Centroid(2),'CUADRADO','Color','b');
        squares=squares+1;
    end
end

textlegend={};
cantidad=[squares triangles circles];
nombres=["Cuadrados", "Triangulos", "Circulos"];
title('Figuras Geometricas');
for i=1:3
    textlegend=[textlegend, nombres];
end
for j=1:3
    textlegend=[textlegend, cantidad];
end
legend(textlegend)

disp('Cuadrados: ')
disp(squares)
disp('Triangulos: ')
disp(triangles);
disp('Circulos: ')
disp(circles);
